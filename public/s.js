var f,o,k,w,d,m,p,v;d=console;o=location.host;({protocol:p,host:o}=location);k=p+`//${o}/`;v=e=>new Promise(r=>setTimeout(r,e));w=async e=>{var r,n,i,t,c;if(c=new URL(e.url),c.host!==o){r={credentials:"omit",mode:"cors"};try{t=await fetch(e,r)}catch(a){n=a,delete r.mode,t=await fetch(e,r)}}else t=await fetch(e);return t&&(t.ok=[200,304].indexOf(t.status)>=0,t.ok&&(i=new Response(t.clone().body,t),i.headers.set("_",parseInt(new Date/1e3).toString(16)),caches.open(1).then(a=>a.put(e,i)))),t};m=async e=>{var r,n;for(n=0;;)try{return await w(e)}catch(i){if(r=i,n++>9)throw r;d.error(n,e,r)}};f={install:e=>{e.waitUntil(skipWaiting())},activate:e=>{e.waitUntil(clients.claim())},fetch:e=>{var r,n,i,t,c;t=e.request,{url:c,method:n}=t,c.startsWith("http")&&(["GET","OPTIONS"].indexOf(n)<0||t.headers.get("accept").includes("stream")||({host:r}=c=new URL(c),{pathname:i}=c,r===o&&!i.includes(".")&&(t=new Request("/",{method:n})),e.respondWith(caches.match(t).then(async a=>{var h,s,u,l;if(a)for(h=a.headers.get("cache-control")||"";!(h&&(h==="no-cache"||(l=/max-age=(\d+)/.exec(h),l&&new Date/1e3-parseInt(a.headers.get("_"),16)-l[1]>0)));)return a;try{u=await m(t)}catch(g){if(s=g,a)return d.error(s),a;throw s}return a&&a.ok&&!u.ok?a:u}))))}};(()=>{var e,r;for(e in f)r=f[e],addEventListener(e,r)})()
